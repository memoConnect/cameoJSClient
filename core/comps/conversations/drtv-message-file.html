<div class="file-download" ng-if="file.state.is('readyForDownload')" ng-click="file.startDownloadChunks()">
    <div>
        <div class="file {{file.detectedExtension}}"></div>
        <i class="fa cm-download-blanc"></i>
    </div>
    <span class="file-informations">{{file.name}}<br />
        {{cmUtil.bytesToStr(file.size)}}
    </span>
</div>
<div ng-if="!file.state.is('readyForDownload')">
    <cm-progressbar cm-percent="progress" ng-if="!file.state.is('cached')"></cm-progressbar>

    <div ng-if="file.state.is('cached')">
        <div class="file-image" ng-if="file.isEmbed('image')">
            <cm-loader cm-color="ci-color" class="full-inline" ng-show="!file.loaded"></cm-loader>
            <img cm-blob-image="file" ng-click="openFullscreen($event)" />
        </div>
        <div class="file-html5" ng-if="file.isEmbed('video')">
            <cm-loader cm-color="ci-color" ng-show="!file.loaded"></cm-loader>
            <video controls="true" cm-blob-video-audio="file"></video>
        </div>
        <div class="file-html5" ng-if="file.isEmbed('audio')">
            <cm-loader cm-color="ci-color" ng-show="!file.loaded"></cm-loader>
            <audio controls="true" cm-blob-video-audio="file"></audio>
        </div>
        <div ng-if="!file.isEmbed()" class="file {{file.detectedExtension}}" ng-click="file.promptSaveAs()"></div>
    </div>
</div>